<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">

     <title>eelテスト</title>
        <link rel="stylesheet" href="./style.css">
  </head>

  <body>
     <div class="container">
        <h1 class="bg-info text-dark rounded-pill text-center py-3">鬼滅キャラ検索システム</h1>
        <div>
        <label>【CSVファイル】</label>
        </div>
        <div class="mb-3">
        <input type="text" id="csv_file" size="20" value="" placeholder=".csvまで入力">
        </div>
        <div>
        <label>【検索ワード】</label>
        </div>
        <div class="mb-3">
        <input type="text" id="search_word" size="20" value="">
        <button type="button" class="btn btn-success" id="search">検索</button>
        </div>
        
        <textarea name="result" id = "textarea" rows="15" cols="50"></textarea>
    </div>

    <script type="text/javascript" src="./eel.js"></script>
        <script>
        var csv_file = document.getElementById('csv_file');
        var search_word= document.getElementById('search_word');
        var search = document.getElementById('search');
        var textarea = document.getElementById('textarea');
        
            search.addEventListener('click', () => {
            if (search_word.value == "" || csv_file.value == "")  {
                        alert("空欄を入力してください");
                        }
            else {
                

                async function run() {
                let add_value = await eel.kimetsu_search(search_word.value,csv_file.value)();             
                }
                run();
                       }
            })

            eel.expose(view_log_js)
            function view_log_js(text){
                var inputVal = text+'\n';
                textarea.value = (textarea.value+inputVal);
            }
        </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
  </body>
</html>